{{- define "main" -}}

<div class='hx:mx-auto hx:flex hextra-max-page-width'>
  {{ partial "sidebar.html" (dict "context" .) }}
  {{ partial "toc.html" . }}
  <article class="hx:w-full">
    <!-- Row header -->
    <header class="hx:mb-6">
      <h1 class="hx:text-3xl hx:font-bold">{{ .Title }}</h1>
      {{- with .Summary }}
      <p class="hx:mt-2 hx:text-gray-600 hx:dark:text-gray-300">{{ . }}</p>
      {{- end }}
    </header>

    <!-- Cells displayed horizontally -->
    <div class="hx:flex hx:flex-nowrap hx:gap-4" style="overflow:scroll">
      {{- range .Sections -}}
      {{- $bgColor := .Params.bg_color | default "transparent" -}}
      <!-- DEBUG: bg_color = {{ $bgColor }}, title = {{ .Title }} -->
      <section
        class="hx:mt-8 hx:prose hx:dark:prose-invert hx:max-w-none hx:border hx:border-gray-200 hx:dark:border-neutral-700 hx:rounded-sm hx:p-3"
        style="background-color: {{ $bgColor }} !important;">
        {{.Content }}
      </section>

      {{- end }}
    </div>

  </article>
</div>
{{- end }}