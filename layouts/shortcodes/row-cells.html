{{/*
Shortcode: row-cells
Displays all immediate child section pages (cells) horizontally

Usage in row/_index.md:
{{< row-cells>}}
  */}}

  {{- $rowBgColor := .Page.Params.bg_color | default "transparent" -}}
  <div
    style="display: flex; flex-direction: column; height: calc(100vh - 12rem); background-color: {{ $rowBgColor }} !important;">
    <div class="hx:flex hx:gap-0 hx:mt-0 hx:overflow-x-auto" style="flex: 1; min-height: 0;">
      {{- $currentPage := .Page }}
      {{- range $currentPage.Sections }}
      {{- $bgColor := .Params.bg_color | default "transparent" -}}
      <div
        class="hx:shrink-0 hx:w-64 hx:border hx:border-gray-200 hx:dark:border-neutral-700 hx:rounded-sm hx:p-0 hx:flex hx:flex-col"
        style="height: 100%; background-color: {{ $bgColor }} !important;">
        <h3 class="hx:text-lg hx:font-semibold hx:mb-3 hx:shrink-0">
          <a href="{{ .RelPermalink }}" class="hx:text-blue-600 hx:dark:text-blue-400 hx:hover:underline">{{ .Title
            }}</a>
        </h3>
        <div class="hx:prose hx:prose-sm hx:dark:prose-invert hx:max-w-none hx:overflow-y-auto" contenteditable="true"
          style="flex: 1; min-height: 0;">
          {{ .Content }}
        </div>
      </div>
      {{- end }}
    </div>
    <div
      class="hx:py-2 hx:px-4 hx:text-sm hx:text-gray-600 hx:dark:text-gray-400 hx:border-t hx:border-gray-200 hx:dark:border-neutral-700 hx:bg-gray-50 hx:dark:bg-neutral-800">
      {{ len $currentPage.Sections }} cells
    </div>
  </div>